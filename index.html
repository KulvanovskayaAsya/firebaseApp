<!DOCTYPE html>
<html>
  <head>
    <title>Тестовый сайт</title>
  </head>
  <body>
    <div id="token"></div>
    <div id="msg"></div>
    <div id="notis"></div>
    <div id="err"></div>
    <!-- <h1>Тестовый сайт</h1>
    <button onclick="requestPermission()">Разрешить уведомления</button> -->

    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-messaging.js"></script>

    <script>
      MsgElem = document.getElementById("msg");
      TokenElem = document.getElementById("token");
      NotisElem = document.getElementById("notis");
      ErrElem = document.getElementById("err");
      
      var config = {
        apiKey: "AIzaSyDY-mt6s0xxvoCHtsXSflHczhMZ43GP8CQ",
        authDomain: "grandcasino-47124.firebaseapp.com",
        projectId: "grandcasino-47124",
        storageBucket: "grandcasino-47124.appspot.com",
        messagingSenderId: "1055046129020",
        appId: "1:1055046129020:web:82d8b2224aa908550240f9",
        measurementId: "G-B8ZQV7SDLF"
      };
      firebase.initializeApp(config);

      const messaging = firebase.messaging();
      messaging
          .requestPermission()
          .then(function () {
              MsgElem.innerHTML = "Notification permission granted."
              console.log("Notification permission granted.");

              // get the token in the form of promise
              return messaging.getToken()
          })
          .then(function(token) {
              TokenElem.innerHTML = "token is : " + token
          })
          .catch(function (err) {
              ErrElem.innerHTML =  ErrElem.innerHTML + "; " + err
              console.log("Unable to get permission to notify.", err);
          });

  </script>
    <!-- <script>
      // Конфигурация Firebase проекта
      const firebaseConfig = {
        apiKey: "AIzaSyDY-mt6s0xxvoCHtsXSflHczhMZ43GP8CQ",
        authDomain: "grandcasino-47124.firebaseapp.com",
        projectId: "grandcasino-47124",
        storageBucket: "grandcasino-47124.appspot.com",
        messagingSenderId: "1055046129020",
        appId: "1:1055046129020:web:82d8b2224aa908550240f9",
        measurementId: "G-B8ZQV7SDLF"
      };

      // Инициализация Firebase
      firebase.initializeApp(firebaseConfig);
      
      // Получение экземпляра мессенджера Firebase
      const messaging = firebase.messaging();

      // Запрос на получение разрешения пользователя для отправки уведомлений
      function requestPermission() {
        Notification.requestPermission()
          .then((permission) => {
            if (permission === 'granted') {
              console.log('Уведомления разрешены');
              getToken();
            } else {
              console.log('Уведомления запрещены');
            }
          })
          .catch((error) => {
            console.log('Ошибка при запросе разрешения:', error);
          });
      }

      // Получение токена устройства для отправки уведомлений
      function getToken() {
        messaging.getToken({ vapidKey: 'BIJPldOt0znj8h_XZGAtqW3Nv8g8kwW9sXKc19EAuIcRVw20M1dMl5SXXNSP0_nH3ZX9L7SaeNR_Yre02o9CyKI' })
          .then((currentToken) => {
            if (currentToken) {
              console.log('Токен устройства:', currentToken);
            } else {
              console.log('Токен устройства не найден');
            }
          })
          .catch((error) => {
            console.log('Ошибка при получении токена устройства:', error);
          });
      }

      // Обработка входящих сообщений от Firebase
      messaging.onMessage((payload) => {
        console.log('Получено сообщение:', payload);
      });
    </script> -->
  </body>
</html>